# Sentrix Project - Centralized Environment Configuration
# Copy this file to .env and update values for your environment
# This single .env file is used by ALL services (backend, yolo-service, frontend)

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# PORT CONFIGURATION
# =============================================================================
BACKEND_PORT=8000
YOLO_SERVICE_PORT=8001
FRONTEND_PORT=3000

# Service URLs (adjust for Docker/Production)
BACKEND_HOST=0.0.0.0
BACKEND_URL=http://localhost:8000
YOLO_SERVICE_URL=http://localhost:8001
FRONTEND_URL=http://localhost:3000

# =============================================================================
# SECURITY - CRITICAL
# =============================================================================
# Secret keys (minimum 32 characters)
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
SECRET_KEY=dev-secret-key-change-in-production-min32chars
JWT_SECRET_KEY=dev-jwt-secret-key-change-in-production-min32chars
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Development: sqlite:///./test.db
# Production: postgresql://user:password@host:5432/database
DATABASE_URL=sqlite:///./test.db

# PostgreSQL (if used)
POSTGRES_DB=sentrix
POSTGRES_USER=sentrix_user
POSTGRES_PASSWORD=sentrix_password_change_in_production
POSTGRES_PORT=5432

# Supabase Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
SUPABASE_JWT_SECRET=your-jwt-secret

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Redis for Celery task queue and caching
REDIS_URL=redis://localhost:6379/0
REDIS_TTL=3600

# Celery Configuration (Optional - defaults to REDIS_URL)
# CELERY_BROKER_URL=redis://localhost:6379/0
# CELERY_RESULT_BACKEND=redis://localhost:6379/0

# =============================================================================
# YOLO SERVICE CONFIGURATION
# =============================================================================
# Model settings
YOLO_MODEL_PATH=models/best.pt
YOLO_CONFIDENCE_THRESHOLD=0.5
YOLO_DEVICE=auto
YOLO_BATCH_SIZE=10
YOLO_MAX_DETECTIONS=100

# Performance settings
YOLO_TIMEOUT_SECONDS=60
YOLO_MAX_RETRIES=3
YOLO_MAX_CONCURRENT_REQUESTS=5

# =============================================================================
# FILE HANDLING
# =============================================================================
# Maximum file upload size (50MB default)
MAX_FILE_SIZE=52428800

# Allowed file extensions (JSON array format for Pydantic Settings v2)
# Note: Must use JSON array format like: [".ext1",".ext2",".ext3"]
ALLOWED_EXTENSIONS=[".jpg",".jpeg",".png",".tiff",".tif",".heic",".heif",".webp"]

# Upload directories
UPLOAD_DIRECTORY=./uploads
TEMP_DIRECTORY=./temp
CLEANUP_TEMP_FILES=true
TEMP_FILE_RETENTION_HOURS=24

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Allowed origins (JSON array format for Pydantic Settings v2)
# Note: Must use JSON array format like: ["url1","url2","url3"]
ALLOWED_ORIGINS=["http://localhost:3000","http://localhost:3001","http://127.0.0.1:3000"]
ALLOW_CREDENTIALS=true
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_FORMAT=detailed
LOG_FILE_BACKEND=./logs/backend.log
LOG_FILE_YOLO=./logs/yolo-service.log
LOG_FILE_SHARED=./logs/shared.log

# Log rotation
LOG_MAX_FILE_SIZE_MB=10
LOG_BACKUP_COUNT=5

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_GPS_EXTRACTION=true
ENABLE_CAMERA_METADATA=true
ENABLE_BATCH_PROCESSING=true
ENABLE_RATE_LIMITING=true
ENABLE_CACHING=true

# Development settings
RELOAD_ON_CHANGE=true
SHOW_DOCS=true

# =============================================================================
# OPENTELEMETRY (Distributed Tracing)
# =============================================================================
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=sentrix-backend
# OTEL_TRACES_EXPORTER=otlp,console
# OTEL_METRICS_EXPORTER=none
# OTEL_LOGS_EXPORTER=none

# =============================================================================
# EXTERNAL APIs (Optional)
# =============================================================================
# Google Maps API (for GPS link generation)
# GOOGLE_MAPS_API_KEY=your_google_maps_api_key

# Email service (for notifications)
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your_email@gmail.com
# SMTP_PASSWORD=your_app_password

# Sentry for error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# =============================================================================
# MONITORING
# =============================================================================
# ENABLE_METRICS=true
# METRICS_PORT=9090

# =============================================================================
# DOCKER CONFIGURATION (if using Docker)
# =============================================================================
# USE_DOCKER=false
# POSTGRES_HOST=postgres
# REDIS_HOST=redis

# =============================================================================
# PRODUCTION CONFIGURATION EXAMPLE
# =============================================================================
# For production, update these values:
#
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=WARNING
#
# SECRET_KEY=<generate-random-32-char-key>
# JWT_SECRET_KEY=<generate-different-random-32-char-key>
#
# DATABASE_URL=postgresql://user:password@prod-db:5432/sentrix
# REDIS_URL=redis://prod-redis:6379/0
#
# YOLO_SERVICE_URL=http://yolo-service:8001
# BACKEND_URL=https://api.sentrix.com
# FRONTEND_URL=https://app.sentrix.com
#
# ALLOWED_ORIGINS=["https://app.sentrix.com","https://www.sentrix.com"]
#
# RELOAD_ON_CHANGE=false
# SHOW_DOCS=false
