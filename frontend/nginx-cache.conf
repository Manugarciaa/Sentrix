# Nginx cache configuration for Sentrix Frontend
# Include this in your nginx server block

# HTML files - no cache
location ~* \.html$ {
    add_header Cache-Control "public, max-age=0, must-revalidate";
}

# Hashed assets (JS, CSS) - cache for 1 year
location ~* /assets/.*\.(js|css)$ {
    add_header Cache-Control "public, max-age=31536000, immutable";
}

# Hashed images - cache for 1 year
location ~* /assets/images/.*\.(png|jpg|jpeg|gif|webp|svg|ico)$ {
    add_header Cache-Control "public, max-age=31536000, immutable";
}

# Fonts - cache for 1 year
location ~* \.(woff|woff2|eot|ttf|otf)$ {
    add_header Cache-Control "public, max-age=31536000, immutable";
    add_header Access-Control-Allow-Origin "*";
}

# Public images (no hash) - cache for 1 week
location ~* /images/.*\.(png|jpg|jpeg|gif|webp|svg)$ {
    add_header Cache-Control "public, max-age=604800";
}

# Icons - cache for 1 week
location ~* \.(png|jpg|jpeg|svg|ico)$ {
    add_header Cache-Control "public, max-age=604800";
}

# Service worker and manifest - no cache
location ~* (sw\.js|manifest\.json)$ {
    add_header Cache-Control "public, max-age=0, must-revalidate";
}

# Enable gzip compression
gzip on;
gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_types text/plain text/css text/xml text/javascript application/json application/javascript application/xml+rss application/rss+xml font/truetype font/opentype application/vnd.ms-fontobject image/svg+xml;
